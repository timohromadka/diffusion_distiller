import subprocess

commands = [
    # MNIST SHORT DISTILLATION EXPERIMENTS
    "python distillate.py --module mnist_model --diffusion GaussianDiffusionDefault --name mnist_exp --dname 1024_512_sf2_ni32_inference --skip_factor 2 --base_checkpoint ./checkpoints/mnist_exp/teacher/checkpoint_30000.pt --batch_size 64 --num_workers 2 --num_iters 32 --ckpt_step_interval 32 --log_step_interval 16",
    "python distillate.py --module mnist_model --diffusion GaussianDiffusionDefault --name mnist_exp --dname 512_256_sf2_ni32_inference --skip_factor 2 --base_checkpoint ./checkpoints/mnist_exp/1024_512_sf2_ni32/checkpoint_32.pt --batch_size 64 --num_workers 2 --num_iters 32 --ckpt_step_interval 32 --log_step_interval 16",
    "python distillate.py --module mnist_model --diffusion GaussianDiffusionDefault --name mnist_exp --dname 256_128_sf2_ni32_inference --skip_factor 2 --base_checkpoint ./checkpoints/mnist_exp/512_256_sf2_ni32/checkpoint_32.pt --batch_size 64 --num_workers 2 --num_iters 32 --ckpt_step_interval 32 --log_step_interval 16",
    "python distillate.py --module mnist_model --diffusion GaussianDiffusionDefault --name mnist_exp --dname 128_64_sf2_ni32_inference --skip_factor 2 --base_checkpoint ./checkpoints/mnist_exp/256_128_sf2_ni32/checkpoint_32.pt --batch_size 64 --num_workers 2 --num_iters 32 --ckpt_step_interval 32 --log_step_interval 16",
    "python distillate.py --module mnist_model --diffusion GaussianDiffusionDefault --name mnist_exp --dname 64_32_sf2_ni32_inference --skip_factor 2 --base_checkpoint ./checkpoints/mnist_exp/128_64_sf2_ni32/checkpoint_32.pt --batch_size 64 --num_workers 2 --num_iters 32 --ckpt_step_interval 32 --log_step_interval 16",
    "python distillate.py --module mnist_model --diffusion GaussianDiffusionDefault --name mnist_exp --dname 32_16_sf2_ni32_inference --skip_factor 2 --base_checkpoint ./checkpoints/mnist_exp/64_32_sf2_ni32/checkpoint_32.pt --batch_size 64 --num_workers 2 --num_iters 32 --ckpt_step_interval 32 --log_step_interval 16",
    "python distillate.py --module mnist_model --diffusion GaussianDiffusionDefault --name mnist_exp --dname 16_8_sf2_ni32_inference --skip_factor 2 --base_checkpoint ./checkpoints/mnist_exp/32_16_sf2_ni32/checkpoint_32.pt --batch_size 64 --num_workers 2 --num_iters 32 --ckpt_step_interval 32 --log_step_interval 16",
    "python distillate.py --module mnist_model --diffusion GaussianDiffusionDefault --name mnist_exp --dname 8_4_sf2_ni32_inference --skip_factor 2 --base_checkpoint ./checkpoints/mnist_exp/16_8_sf2_ni32/checkpoint_32.pt --batch_size 64 --num_workers 2 --num_iters 32 --ckpt_step_interval 32 --log_step_interval 16",
    "python distillate.py --module mnist_model --diffusion GaussianDiffusionDefault --name mnist_exp --dname 4_2_sf2_ni32_inference --skip_factor 2 --base_checkpoint ./checkpoints/mnist_exp/8_4_sf2_ni32/checkpoint_32.pt --batch_size 64 --num_workers 2 --num_iters 32 --ckpt_step_interval 32 --log_step_interval 16",
    "python distillate.py --module mnist_model --diffusion GaussianDiffusionDefault --name mnist_exp --dname 2_1_sf2_ni32_inference --skip_factor 2 --base_checkpoint ./checkpoints/mnist_exp/4_2_sf2_ni32/checkpoint_32.pt --batch_size 64 --num_workers 2 --num_iters 32 --ckpt_step_interval 32 --log_step_interval 16", 

    # CIFAR10 SHORT DISTILLATION EXPERIMENT
    "python distillate.py --module cifar10_model --diffusion GaussianDiffusionDefault --name cifar10_exp --dname 1024_512_sf2_ni32_inference --skip_factor 2 --base_checkpoint ./checkpoints/cifar10_exp/teacher/checkpoint_30000.pt --batch_size 64 --num_workers 2 --num_iters 32 --ckpt_step_interval 32 --log_step_interval 16",
    "python distillate.py --module cifar10_model --diffusion GaussianDiffusionDefault --name cifar10_exp --dname 512_256_sf2_ni32_inference --skip_factor 2 --base_checkpoint ./checkpoints/cifar10_exp/1024_512_sf2_ni32/checkpoint_32.pt --batch_size 64 --num_workers 2 --num_iters 32 --ckpt_step_interval 32 --log_step_interval 16",
    "python distillate.py --module cifar10_model --diffusion GaussianDiffusionDefault --name cifar10_exp --dname 256_128_sf2_ni32_inference --skip_factor 2 --base_checkpoint ./checkpoints/cifar10_exp/512_256_sf2_ni32/checkpoint_32.pt --batch_size 64 --num_workers 2 --num_iters 32 --ckpt_step_interval 32 --log_step_interval 16",
    "python distillate.py --module cifar10_model --diffusion GaussianDiffusionDefault --name cifar10_exp --dname 128_64_sf2_ni32_inference --skip_factor 2 --base_checkpoint ./checkpoints/cifar10_exp/256_128_sf2_ni32/checkpoint_32.pt --batch_size 64 --num_workers 2 --num_iters 32 --ckpt_step_interval 32 --log_step_interval 16",
    "python distillate.py --module cifar10_model --diffusion GaussianDiffusionDefault --name cifar10_exp --dname 64_32_sf2_ni32_inference --skip_factor 2 --base_checkpoint ./checkpoints/cifar10_exp/128_64_sf2_ni32/checkpoint_32.pt --batch_size 64 --num_workers 2 --num_iters 32 --ckpt_step_interval 32 --log_step_interval 16",
    "python distillate.py --module cifar10_model --diffusion GaussianDiffusionDefault --name cifar10_exp --dname 32_16_sf2_ni32_inference --skip_factor 2 --base_checkpoint ./checkpoints/cifar10_exp/64_32_sf2_ni32/checkpoint_32.pt --batch_size 64 --num_workers 2 --num_iters 32 --ckpt_step_interval 32 --log_step_interval 16",
    "python distillate.py --module cifar10_model --diffusion GaussianDiffusionDefault --name cifar10_exp --dname 16_8_sf2_ni32_inference --skip_factor 2 --base_checkpoint ./checkpoints/cifar10_exp/32_16_sf2_ni32/checkpoint_32.pt --batch_size 64 --num_workers 2 --num_iters 32 --ckpt_step_interval 32 --log_step_interval 16",
    "python distillate.py --module cifar10_model --diffusion GaussianDiffusionDefault --name cifar10_exp --dname 8_4_sf2_ni32_inference --skip_factor 2 --base_checkpoint ./checkpoints/cifar10_exp/16_8_sf2_ni32/checkpoint_32.pt --batch_size 64 --num_workers 2 --num_iters 32 --ckpt_step_interval 32 --log_step_interval 16",
    "python distillate.py --module cifar10_model --diffusion GaussianDiffusionDefault --name cifar10_exp --dname 4_2_sf2_ni32_inference --skip_factor 2 --base_checkpoint ./checkpoints/cifar10_exp/8_4_sf2_ni32/checkpoint_32.pt --batch_size 64 --num_workers 2 --num_iters 32 --ckpt_step_interval 32 --log_step_interval 16",
    "python distillate.py --module cifar10_model --diffusion GaussianDiffusionDefault --name cifar10_exp --dname 2_1_sf2_ni32_inference --skip_factor 2 --base_checkpoint ./checkpoints/cifar10_exp/4_2_sf2_ni32/checkpoint_32.pt --batch_size 64 --num_workers 2 --num_iters 32 --ckpt_step_interval 32 --log_step_interval 16", 

]

for cmd in commands:
    subprocess.call(cmd, shell=True)

# nohup python experiments/run_ni32_shorter_distillation_experiments.py > logs/ni32_shorter_distillation_experiments_ni32.log 2>&1 &
